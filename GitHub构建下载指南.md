# 🚀 GitHub Actions 构建指南

## ✅ 构建已触发

我已经成功将最新代码推送到GitHub并触发GitHub Actions构建！

---

## 📥 下载APK

### 步骤：

1. **访问Actions页面**
   - 链接：https://github.com/kqiwanWQ/social-card-game/actions

2. **查看构建状态**
   - 找到最新的构建记录
   - 应该显示最新的提交：`b72c303 trigger: 触发GitHub Actions构建最新版本`
   - 状态应该是：
     - ⚪ Pending - 等待中
     - 🟡 Running - 运行中
     - ✅ Success - 成功（绿色）
     - ❌ Failed - 失败（红色）

3. **等待构建完成**
   - 首次构建约：5-10分钟
   - 后续构建约：3-5分钟

4. **下载APK**
   - 点击构建记录
   - 滚动到页面底部
   - 找到 "Artifacts" 部分
   - 点击 "social-card-game-debug" 下载
   - 解压后找到 `app-debug.apk`

---

## 🔍 验证APK版本

安装APK后，应该看到：

### ✅ 新版本特征（必须都有）：

1. **底部导航栏** ⭐ 最重要
   - 🎴 卡牌
   - 🎯 策略
   - 📊 统计
   - ⚙️ 设置 ← **必须有这个！**

2. **设置页面**
   - 点击"设置"可以打开设置页面
   - 可以配置API地址
   - 可以测试连接

3. **图片选择功能**
   - 新增卡牌时可以选择图片
   - 📷 从图库选择
   - 📸 拍照
   - 🔗 输入图片链接

### ❌ 旧版本特征（不应该有）：
- ❌ 只有搜索框和新增按钮
- ❌ 没有底部导航
- ❌ 没有设置按钮
- ❌ 无法选择图片

---

## 📋 构建历史

最新的提交：

```
b72c303 trigger: 触发GitHub Actions构建最新版本  ← 最新
417eb00 feat: 添加构建检查脚本
33f82d5 docs: 添加正确构建APK指南
f5ff9d0 docs: 添加测试指南
c6d484a docs: 添加问题修复说明文档
12d655c fix: 修复两个关键问题
```

---

## ⚠️ 如果构建失败

### 可能原因：

1. **GitHub Actions配置问题**
   - 查看构建日志
   - 检查错误信息

2. **依赖下载失败**
   - 等待后重试
   - 或手动重新触发

3. **构建超时**
   - 再次触发构建

### 重新触发构建：

在Actions页面：
1. 点击失败的构建记录
2. 点击右上角 "Re-run jobs"
3. 选择 "Re-run all jobs"

或重新触发提交：
```bash
git commit --allow-empty -m "trigger: 重新触发构建"
git push
```

---

## 🎯 安装新APK

### 步骤：

1. **卸载旧版本**
   - 长按应用图标
   - 卸载
   - 或者：设置 → 应用 → 社交卡牌 → 卸载

2. **安装新版本**
   - 下载APK
   - 打开APK文件
   - 点击"安装"
   - 完成安装

3. **验证版本**
   - 启动应用
   - 检查是否有底部导航
   - 检查是否有设置按钮

---

## 🔧 配置服务器地址

安装新APK后：

1. **启动应用**

2. **点击"设置"** ⚙️

3. **配置API地址**
   - 输入：`http://你的服务器IP:8000/api`
   - 例如：`http://192.168.1.100:8000/api`
   - **重要：不要使用localhost或127.0.0.1**

4. **测试连接**
   - 点击"🔍 测试连接"
   - 应该显示"✅ 连接成功！"

5. **保存配置**
   - 点击"💾 保存配置"

---

## 📱 获取服务器IP

### Windows：
```cmd
ipconfig
```
找到 "IPv4 地址"，例如：`192.168.1.100`

### macOS：
```bash
ifconfig | grep "inet "
```

### Linux：
```bash
ip addr show | grep "inet "
```

---

## ✅ 功能测试清单

安装新APK后，测试以下功能：

- [ ] 有底部导航栏（4个选项）
- [ ] 能打开设置页面
- [ ] 能配置API地址
- [ ] 能测试连接
- [ ] 能新增卡牌
- [ ] 能从图库选择图片
- [ ] 能拍照
- [ ] 能保存卡牌
- [ ] 能编辑卡牌
- [ ] 能记录互动
- [ ] 能生成策略报告

---

## 🆘 常见问题

### Q: 构建完成后在哪里下载APK？

A:
1. 访问：https://github.com/kqiwanWQ/social-card-game/actions
2. 点击最新的构建记录
3. 滚动到底部
4. 在 "Artifacts" 部分下载

### Q: 构建需要多久？

A:
- 首次构建：5-10分钟
- 后续构建：3-5分钟

### Q: 如何知道构建完成了？

A:
- Actions页面显示 ✅ Success（绿色）
- 构建记录下方会显示 "Artifacts"
- 可以下载APK

### Q: 下载的APK安装后还是旧版本？

A:
1. 确认卸载了旧版本
2. 重新下载APK
3. 检查构建时间是否是最新的
4. 查看Actions页面的提交记录

### Q: 如果GitHub Actions一直不运行？

A:
1. 检查仓库的Actions是否已启用
2. Settings → Actions → General → Actions permissions
3. 确保设置为 "Allow all actions"

---

## 📊 构建信息

**当前提交：** b72c303

**提交信息：** trigger: 触发GitHub Actions构建最新版本

**包含功能：**
- ✅ 底部导航（卡牌、策略、统计、设置）
- ✅ 设置页面（配置API地址）
- ✅ 图片选择（图库、拍照、链接）
- ✅ API地址可配置
- ✅ 连接测试功能

**文件大小：**
- app.html: 52KB
- APK: 约8-12MB

---

## 🎉 享受你的应用

构建完成后，你将拥有一个功能完整的社交模拟卡牌游戏！

**祝你使用愉快！** 🎮✨
